<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terrae Aegis | Enquadramento Estratégico</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <style>
        :root {
            --azul-profundo: #0A192F;
            --dourado-fosco: #C5A059;
            --dourado-brilhante: #FFD700;
            --branco-marfim: #E6E6E6;
        }

        * { -webkit-user-select: none; user-select: none; -webkit-user-drag: none; }

        body {
            margin: 0;
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: var(--azul-profundo);
            color: var(--branco-marfim);
            overflow: hidden;
        }

        /* --- MARCA D'ÁGUA (8-10% OPACIDADE) --- */
        .marca-dagua-fundo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            opacity: 0.08;
            z-index: 0;
            pointer-events: none;
        }

        /* --- GATEKEEPER RITUAL (4 SEGUNDOS) --- */
        #gatekeeper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--azul-profundo);
            z-index: 9999; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            font-family: 'Courier New', monospace;
            transition: opacity 1s ease-out;
        }
        .roleta-box { text-align: center; border: 1px solid var(--dourado-fosco); padding: 40px; background: rgba(0,0,0,0.3); width: 80%; max-width: 400px; }
        #roleta-ip { font-size: 1.8em; color: var(--dourado-brilhante); margin-bottom: 10px; }

        /* --- LAYOUT E BARRA TRINDADE --- */
        .barra-trindade {
            width: 100%; display: flex; justify-content: center;
            background: rgba(10, 25, 47, 0.95); border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            position: fixed; top: 0; z-index: 2000; backdrop-filter: blur(10px);
        }
        .item-trindade-container { padding: 15px 20px; cursor: pointer; }
        .item-trindade { font-size: 0.75em; letter-spacing: 3px; text-transform: uppercase; color: var(--dourado-brilhante); font-weight: bold; }
        .divisor-trindade { color: var(--dourado-brilhante); padding-top: 13px; opacity: 0.8; }

        .btn-sair-topo {
            position: absolute; top: 65px; right: 5%;
            padding: 10px 20px; border: 1px solid var(--dourado-fosco);
            color: var(--dourado-fosco); text-transform: uppercase;
            letter-spacing: 2px; font-size: 0.7em; text-decoration: none; z-index: 1000;
        }

        /* HEADER: LOGO CENTRALIZADO SOBRE A COLUNA ESQUERDA */
        header { 
            position: absolute;
            top: 85px; 
            left: 5%; 
            width: 195px; 
            display: flex;
            justify-content: center;
            z-index: 1001;
        }
        .logo img { height: 110px; width: auto; }

        /* --- CONTAINER PRINCIPAL --- */
        .container-principal {
            display: flex;
            justify-content: flex-start;
            align-items: flex-start;
            padding: 0 5%;
            height: 100vh;
            position: relative;
            z-index: 10;
        }

        .setores-operacionais {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 195px; 
            align-items: flex-start;
            border-right: 1px solid rgba(197, 160, 89, 0.2); 
            padding-right: 20px;
            margin-top: 215px; 
        }

        .setor-card {
            width: 100%; height: 35px; 
            border: 1px solid rgba(197, 160, 89, 0.3);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; text-transform: uppercase; font-size: 0.65em;
            letter-spacing: 2px; color: var(--dourado-fosco); transition: 0.3s;
            white-space: nowrap;
        }
        .setor-card:hover { border-color: var(--dourado-brilhante); color: #fff; background: rgba(197,160,89,0.1); }

        .btn-contato-trigger {
            margin-top: 15px;
            border-color: var(--dourado-fosco);
            color: var(--dourado-fosco);
            font-weight: normal;
        }

        /* HERO: PALCO CENTRAL */
        .hero { 
            flex: 1; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .btn-enquadramento {
            position: fixed;
            bottom: 18%; 
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 45px; background: transparent;
            border: 1px solid var(--dourado-fosco); color: var(--dourado-fosco);
            text-transform: uppercase; letter-spacing: 3px; font-weight: bold; cursor: pointer; transition: 0.5s;
            z-index: 100;
        }
        .btn-enquadramento:hover { background: var(--dourado-fosco); color: var(--azul-profundo); }

        /* --- MOLDURAS --- */
        .moldura-texto, .moldura-setor, .moldura-contato {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            border: 1px solid var(--dourado-fosco); display: none;
            background: rgba(10, 25, 47, 0.98); z-index: 5000;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }
        .moldura-texto { width: 90%; max-width: 600px; padding: 30px; text-align: center; }
        .moldura-setor { width: 90%; height: 80%; max-width: 1000px; }
        
        /* ESTILO DO MODAL DE CONTATO */
        .moldura-contato { width: 90%; max-width: 500px; padding: 35px; }
        .fechar-contato-x { position: absolute; top: 12px; right: 15px; color: var(--dourado-fosco); cursor: pointer; font-size: 1.2em; opacity: 0.5; transition: 0.3s; }
        .fechar-contato-x:hover { opacity: 1; }

        .input-protocolo {
            width: 100%; background: rgba(255,255,255,0.03); border: 1px solid rgba(197,160,89,0.2);
            color: rgba(230, 230, 230, 0.5); padding: 12px; margin-bottom: 10px; font-size: 0.85em; 
            outline: none; cursor: not-allowed; text-transform: uppercase; box-sizing: border-box;
        }
        .area-mensagem {
            width: 100%; height: 150px; background: transparent; border: 1px solid var(--dourado-fosco);
            color: var(--branco-marfim); padding: 15px; font-family: inherit; resize: none;
            margin-top: 10px; font-size: 0.95em; outline: none; box-sizing: border-box;
        }
        .char-count { font-size: 0.6em; color: var(--dourado-fosco); text-align: right; margin-bottom: 20px; opacity: 0.6; text-transform: uppercase; }
        .btn-enviar-protocolo {
            width: 100%; padding: 18px; background: var(--dourado-fosco); color: var(--azul-profundo);
            border: none; text-transform: uppercase; font-weight: bold; cursor: pointer; letter-spacing: 2px; transition: 0.3s;
        }
        .btn-enviar-protocolo:hover { background: var(--dourado-brilhante); }

        .fechar-moldura { position: absolute; top: 10px; right: 15px; color: var(--dourado-fosco); cursor: pointer; font-size: 1.5em; line-height: 1; }
        .iframe-setor { width: 100%; height: 100%; border: none; }
        #escrita { font-style: italic; line-height: 1.6; color: var(--branco-marfim); font-size: 1.1em; }

        .assinatura-dev { position: fixed; bottom: 10px; right: 20px; font-size: 0.6em; color: #C0C0C0; opacity: 0.5; pointer-events: none; text-transform: uppercase; letter-spacing: 2px; }

        @media (max-width: 768px) {
            .container-principal { flex-direction: column-reverse; align-items: center; justify-content: center; }
            .setores-operacionais { width: 100%; border-right: none; border-top: 1px solid var(--dourado-fosco); padding: 20px 0; margin-top: 20px; }
            header { position: relative; top: 70px; left: 0; text-align: center; }
            .btn-enquadramento { position: relative; bottom: 0; transform: none; margin-top: 20px; }
        }
    </style>
</head>
<body oncontextmenu="return false;">

    <img src="../logo-touro.png" class="marca-dagua-fundo" alt="Background Logo">

    <div id="gatekeeper">
        <div class="roleta-box">
            <div id="roleta-ip">000.000.000.000</div>
            <div id="roleta-geo" style="font-size: 0.8em; opacity: 0.7; letter-spacing: 2px;">IDENTIFICANDO...</div>
        </div>
    </div>

    <nav class="barra-trindade">
        <div class="item-trindade-container" onclick="escrever('seguranca', 'SEGURANÇA')"><span class="item-trindade">Segurança</span></div>
        <span class="divisor-trindade">|</span>
        <div class="item-trindade-container" onclick="escrever('financas', 'FINANÇAS')"><span class="item-trindade">Finanças</span></div>
        <span class="divisor-trindade">|</span>
        <div class="item-trindade-container" onclick="escrever('governanca', 'GOVERNANÇA')"><span class="item-trindade">Governança</span></div>
    </nav>

    <a href="../index.html" class="btn-sair-topo">Sair da Área Restrita</a>

    <header>
        <div class="logo"><img src="../logo-touro.png" alt="Terrae Aegis"></div>
    </header>

    <div class="container-principal">
        <section class="setores-operacionais">
            <div style="font-size: 0.6em; letter-spacing: 4px; color: var(--dourado-fosco); margin-bottom: 10px; text-transform: uppercase; width: 100%; text-align: center;">Aprofundamento</div>
            <div class="setor-card" onclick="abrirSetor('agro2/index.html')">Agro</div>
            <div class="setor-card" onclick="abrirSetor('mineracao2/index.html')">Mineração</div>
            <div class="setor-card" onclick="abrirSetor('industria2/index.html')">Indústria</div>
            <div class="setor-card" onclick="abrirSetor('novos_negocios2/index.html')">Novos Negócios</div>
            <div class="setor-card btn-contato-trigger" onclick="abrirContato()">Contato</div>
        </section>

        <section class="hero">
            <button class="btn-enquadramento" onclick="window.location.href='index.html'">Enquadramento para Soluções</button>
        </section>
    </div>

    <div id="modalContato" class="moldura-contato">
        <span class="fechar-contato-x" onclick="fecharContato()">×</span>
        <h3 style="color: var(--dourado-fosco); text-transform: uppercase; letter-spacing: 3px; font-size: 1em; margin-bottom: 25px; text-align: center;">Requisitar Protocolo</h3>
        
        <form id="formProtocolo">
            <input type="hidden" name="access_key" value="COLOQUE-SEU-TOKEN-AQUI">
            <input type="hidden" name="subject" value="Novo Protocolo Estratégico - Terrae Aegis">
            
            <input type="text" name="identidade" class="input-protocolo" value="IDENTIDADE: [DADOS VALIDADOS]" readonly>
            <input type="text" name="email" class="input-protocolo" value="E-MAIL: [DADOS VALIDADOS]" readonly>
            <input type="text" name="telefone" class="input-protocolo" value="CONTATO: [DADOS VALIDADOS]" readonly>
            
            <textarea name="mensagem" id="msgContato" class="area-mensagem" maxlength="1500" oninput="contarChar(this)" placeholder="Descreva sua demanda estratégica..." required></textarea>
            <div id="contador" class="char-count">1500 caracteres restantes</div>
            
            <button type="submit" class="btn-enviar-protocolo">Enviar Protocolo</button>
        </form>
    </div>

    <div id="moldura" class="moldura-texto">
        <span class="fechar-moldura" onclick="fecharMoldura()">×</span>
        <span id="titulo-moldura" style="color: var(--dourado-fosco); text-transform: uppercase; letter-spacing: 3px; font-size: 1.1em; margin-bottom: 15px; display: block;"></span>
        <div id="escrita"></div>
    </div>

    <div id="molduraSetor" class="moldura-setor">
        <span class="fechar-moldura" onclick="fecharSetor()">×</span>
        <iframe id="iframeSetor" class="iframe-setor"></iframe>
    </div>

    <div class="assinatura-dev">Desenvolvido por Terrae Aegis</div>

    <script>
        document.onkeydown = function(e) {
            if (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || (e.ctrlKey && e.keyCode == 85)) return false;
        };

        const info = {
            'seguranca': "Sob a égide da invencibilidade, blindamos o patrimônio contra instabilidades globais. Garantimos que a perpetuidade do legado seja a única constante.",
            'financas': "Proporcionamos total independência do sistema nacional para acelerar de forma exponencial seus projetos estratégicos globais.",
            'governanca': "Protocolos internacionais onde o investidor mantém o controle absoluto sobre seus bens, permanecendo sempre à frente dos negócios."
        };

        function escrever(tipo, titulo) {
            const moldura = document.getElementById('moldura');
            const box = document.getElementById('escrita');
            document.getElementById('titulo-moldura').innerText = titulo;
            moldura.style.display = 'block';
            box.innerHTML = "";
            let i = 0; const texto = info[tipo];
            function type() { if (i < texto.length) { box.innerHTML += texto.charAt(i); i++; setTimeout(type, 2000 / texto.length); } }
            type();
        }

        function fecharMoldura() { document.getElementById('moldura').style.display = 'none'; }
        function abrirSetor(url) {
            const m = document.getElementById('molduraSetor');
            document.getElementById('iframeSetor').src = url;
            m.style.display = 'block';
        }
        function fecharSetor() {
            document.getElementById('molduraSetor').style.display = 'none';
            document.getElementById('iframeSetor').src = "";
        }

        // --- LÓGICA DE CONTATO INTEGRADA ---
        function abrirContato() { document.getElementById('modalContato').style.display = 'block'; }
        function fecharContato() { document.getElementById('modalContato').style.display = 'none'; }
        function contarChar(val) { document.getElementById('contador').innerHTML = (1500 - val.value.length) + " caracteres restantes"; }

        const form = document.getElementById('formProtocolo');
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(form);
            const object = Object.fromEntries(formData);
            const json = JSON.stringify(object);

            fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: json
            })
            .then(async (response) => {
                if (response.status == 200) {
                    alert("Protocolo enviado com sucesso.");
                    fecharContato();
                    form.reset();
                } else {
                    alert("Erro no envio. Tente novamente.");
                }
            })
            .catch(error => { alert("Falha na comunicação com a central."); });
        });

        window.onload = function() {
            const ipEl = document.getElementById('roleta-ip');
            const geoEl = document.getElementById('roleta-geo');
            let c = 0;
            const t = setInterval(() => {
                ipEl.innerText = `${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`;
                if(c++ > 30) { 
                    clearInterval(t);
                    fetch('https://ipapi.co/json/').then(r => r.json()).then(d => {
                        ipEl.innerText = d.ip;
                        geoEl.innerText = `${d.city}, ${d.region} - ${d.country_name}`;
                        setTimeout(() => { 
                            document.getElementById('gatekeeper').style.opacity = "0";
                            setTimeout(() => document.getElementById('gatekeeper').style.display = "none", 1000);
                        }, 1000);
                    }).catch(() => {
                        setTimeout(() => document.getElementById('gatekeeper').style.display = "none", 500);
                    });
                }
            }, 100);
        };

        document.addEventListener('mousedown', function(e) {
            const mText = document.getElementById('moldura');
            const mSetor = document.getElementById('molduraSetor');
            const mContato = document.getElementById('modalContato');
            if (mText.style.display === 'block' && !mText.contains(e.target) && !e.target.closest('.item-trindade-container')) fecharMoldura();
            if (mSetor.style.display === 'block' && !mSetor.contains(e.target) && !e.target.closest('.setor-card')) fecharSetor();
            if (mContato.style.display === 'block' && !mContato.contains(e.target) && !e.target.closest('.btn-contato-trigger')) fecharContato();
        });
    </script>
</body>
</html>
